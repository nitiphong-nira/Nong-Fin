import axios from 'axios';

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏•‡∏±‡∏ö LINE
export async function replyMessage(replyToken, message) {
  if (!process.env.CHANNEL_ACCESS_TOKEN) {
    console.warn('‚ö†Ô∏è Missing LINE token');
    return;
  }

  try {
    await axios.post(
      'https://api.line.me/v2/bot/message/reply',
      {
        replyToken,
        messages: [{ type: 'text', text: message }],
      },
      {
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${process.env.CHANNEL_ACCESS_TOKEN}`,
        },
      }
    );
    console.log('‚úÖ Reply sent');
  } catch (error) {
    console.error('‚ùå LINE API error:', error.response?.data || error.message);
  }
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Google Sheets
export async function saveToSheets(userData) {
  try {
    // ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ Google Sheets setup ‡∏Å‡πá‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
    // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ ‡∏Å‡πá‡∏Ç‡πâ‡∏≤‡∏°‡πÑ‡∏õ
    console.log('üìä Would save to Sheets:', userData);
    return true;
  } catch (error) {
    console.warn('‚ö†Ô∏è Sheets not available');
    return false;
  }
}
